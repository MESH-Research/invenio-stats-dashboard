{
  "index_patterns": ["__SEARCH_INDEX_PREFIX__stats-community-records-delta-published-*"],
  "template": {
    "settings": {
        "index": {
            "refresh_interval": "5s",
            "number_of_shards": 1,
            "number_of_replicas": 1
        }
    },
    "mappings": {
        "date_detection": false,
        "dynamic": "strict",
        "numeric_detection": false,
        "properties": {
            "timestamp": {
                "type": "date",
                "format": "strict_date_hour_minute_second"
            },
            "community_id": {
                "type": "keyword"
            },
            "period_start": {
                "type": "date",
                "format": "date_optional_time"
            },
            "period_end": {
                "type": "date",
                "format": "date_optional_time"
            },
            "records": {
                "type": "object",
                "properties": {
                  "added": {
                      "type": "object",
                      "properties": {
                          "metadata_only": {
                              "type": "integer"
                          },
                          "with_files": {
                              "type": "integer"
                          }
                      }
                  },
                  "removed": {
                      "type": "object",
                      "properties": {
                          "metadata_only": {
                              "type": "integer"
                          },
                          "with_files": {
                              "type": "integer"
                          }
                      }
                  }
                }
            },
            "parents": {
                "type": "object",
                "properties": {
                  "added": {
                      "type": "object",
                      "properties": {
                          "metadata_only": {
                              "type": "integer"
                          },
                          "with_files": {
                              "type": "integer"
                          }
                      }
                  },
                  "removed": {
                      "type": "object",
                      "properties": {
                          "metadata_only": {
                              "type": "integer"
                          },
                          "with_files": {
                              "type": "integer"
                          }
                      }
                  }
                }
            },
            "files": {
                "type": "object",
                "properties": {
                    "added": {
                        "type": "object",
                        "properties": {
                            "file_count": {
                                "type": "integer"
                            },
                            "data_volume": {
                                "type": "long"
                            }
                        }
                    },
                    "removed": {
                        "type": "object",
                        "properties": {
                            "file_count": {
                                "type": "integer"
                            },
                            "data_volume": {
                                "type": "long"
                            }
                        }
                    }
                }
            },
            "uploaders": {
                "type": "integer"
            },
            "subcounts": {
                "type": "object",
                "properties": {
                    "by_resource_type": {
                        "type": "nested",
                        "properties": {
                            "id": {
                                "type": "keyword"
                            },
                            "label": {
                                "type": "keyword"
                            },
                            "records": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    }
                                }
                            },
                            "parents": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    }
                                }
                            },
                            "files": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "file_count": {
                                                "type": "integer"
                                            },
                                            "data_volume": {
                                                "type": "long"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "file_count": {
                                                "type": "integer"
                                            },
                                            "data_volume": {
                                                "type": "long"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "by_access_status": {
                        "type": "nested",
                        "properties": {
                            "id": {
                                "type": "keyword"
                            },
                            "label": {
                                "type": "keyword"
                            },
                            "records": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    }
                                }
                            },
                            "parents": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    }
                                }
                            },
                            "files": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "file_count": {
                                                "type": "integer"
                                            },
                                            "data_volume": {
                                                "type": "long"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "file_count": {
                                                "type": "integer"
                                            },
                                            "data_volume": {
                                                "type": "long"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "by_language": {
                        "type": "nested",
                        "properties": {
                            "id": {
                                "type": "keyword"
                            },
                            "label": {
                                "type": "keyword"
                            },
                            "records": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    }
                                }
                            },
                            "parents": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    }
                                }
                            },
                            "files": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "file_count": {
                                                "type": "integer"
                                            },
                                            "data_volume": {
                                                "type": "long"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "file_count": {
                                                "type": "integer"
                                            },
                                            "data_volume": {
                                                "type": "long"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "by_affiliation_contributor": {
                        "type": "nested",
                        "properties": {
                            "id": {
                                "type": "keyword"
                            },
                            "label": {
                                "type": "keyword"
                            },
                            "records": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    }
                                }
                            },
                            "parents": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    }
                                }
                            },
                            "files": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "file_count": {
                                                "type": "integer"
                                            },
                                            "data_volume": {
                                                "type": "long"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "file_count": {
                                                "type": "integer"
                                            },
                                            "data_volume": {
                                                "type": "long"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "by_affiliation_creator": {
                        "type": "nested",
                        "properties": {
                            "id": {
                                "type": "keyword"
                            },
                            "label": {
                                "type": "keyword"
                            },
                            "records": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    }
                                }
                            },
                            "parents": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    }
                                }
                            },
                            "files": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "file_count": {
                                                "type": "integer"
                                            },
                                            "data_volume": {
                                                "type": "long"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "file_count": {
                                                "type": "integer"
                                            },
                                            "data_volume": {
                                                "type": "long"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "by_funder": {
                        "type": "nested",
                        "properties": {
                            "id": {
                                "type": "keyword"
                            },
                            "label": {
                                "type": "keyword"
                            },
                            "records": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    }
                                }
                            },
                            "parents": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    }
                                }
                            },
                            "files": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "file_count": {
                                                "type": "integer"
                                            },
                                            "data_volume": {
                                                "type": "long"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "file_count": {
                                                "type": "integer"
                                            },
                                            "data_volume": {
                                                "type": "long"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "by_subject": {
                        "type": "nested",
                        "properties": {
                            "id": {
                                "type": "keyword"
                            },
                            "label": {
                                "type": "keyword"
                            },
                            "records": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    }
                                }
                            },
                            "parents": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    }
                                }
                            },
                            "files": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "file_count": {
                                                "type": "integer"
                                            },
                                            "data_volume": {
                                                "type": "long"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "file_count": {
                                                "type": "integer"
                                            },
                                            "data_volume": {
                                                "type": "long"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "by_publisher": {
                        "type": "nested",
                        "properties": {
                            "id": {
                                "type": "keyword"
                            },
                            "label": {
                                "type": "keyword"
                            },
                            "records": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    }
                                }
                            },
                            "parents": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    }
                                }
                            },
                            "files": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "file_count": {
                                                "type": "integer"
                                            },
                                            "data_volume": {
                                                "type": "long"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "file_count": {
                                                "type": "integer"
                                            },
                                            "data_volume": {
                                                "type": "long"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "by_periodical": {
                        "type": "nested",
                        "properties": {
                            "id": {
                                "type": "keyword"
                            },
                            "label": {
                                "type": "keyword"
                            },
                            "records": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    }
                                }
                            },
                            "parents": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    }
                                }
                            },
                            "files": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "file_count": {
                                                "type": "integer"
                                            },
                                            "data_volume": {
                                                "type": "long"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "file_count": {
                                                "type": "integer"
                                            },
                                            "data_volume": {
                                                "type": "long"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "by_file_type": {
                        "type": "nested",
                        "properties": {
                            "id": {
                                "type": "keyword"
                            },
                            "label": {
                                "type": "keyword"
                            },
                            "added": {
                                "type": "object",
                                "properties": {
                                    "records": {
                                        "type": "integer"
                                    },
                                    "parents": {
                                        "type": "integer"
                                    },
                                    "files": {
                                        "type": "integer"
                                    },
                                    "data_volume": {
                                        "type": "long"
                                    }
                                }
                            },
                            "removed": {
                                "type": "object",
                                "properties": {
                                    "records": {
                                        "type": "integer"
                                    },
                                    "parents": {
                                        "type": "integer"
                                    },
                                    "files": {
                                        "type": "integer"
                                    },
                                    "data_volume": {
                                        "type": "long"
                                    }
                                }
                            }
                        }
                    },
                    "by_license": {
                        "type": "nested",
                        "properties": {
                            "id": {
                                "type": "keyword"
                            },
                            "label": {
                                "type": "keyword"
                            },
                            "records": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    }
                                }
                            },
                            "parents": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "metadata_only": {
                                                "type": "integer"
                                            },
                                            "with_files": {
                                                "type": "integer"
                                            }
                                        }
                                    }
                                }
                            },
                            "files": {
                                "type": "object",
                                "properties": {
                                    "added": {
                                        "type": "object",
                                        "properties": {
                                            "file_count": {
                                                "type": "integer"
                                            },
                                            "data_volume": {
                                                "type": "long"
                                            }
                                        }
                                    },
                                    "removed": {
                                        "type": "object",
                                        "properties": {
                                            "file_count": {
                                                "type": "integer"
                                            },
                                            "data_volume": {
                                                "type": "long"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "updated_timestamp": {
                "type": "date",
                "format": "strict_date_hour_minute_second"
            }
        }
    },
    "aliases": {
        "__SEARCH_INDEX_PREFIX__stats-community-records-delta-published": {}
    }
  },
  "priority": 100,
  "version": 1,
  "_meta": {
    "description": "Changes in community record counts over time periods, including subcounts based on several record metadata fields. Uses the publication date of the record as the initial date of the record."
  }
}